/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C2*/SET SCHEMA PUBLIC
drop table if exists course cascade 
drop table if exists course_material cascade 
drop table if exists lesson cascade 
drop table if exists student cascade 
drop table if exists students_courses cascade 
drop table if exists teacher cascade 
create table course (id bigint generated by default as identity (start with 1), teacher_id bigint, title varchar(255) unique, primary key (id))
create table course_material (course_id bigint not null unique, id bigint not null, course_code varchar(255), rss_no varchar(255), url varchar(255) unique, primary key (id), unique (course_code, rss_no))
create table lesson (course_id bigint, teacher_id bigint, id binary(16) not null, title varchar(255) unique, primary key (id))
create table student (birthdate date, exam_average_grade float(53), want_newsletter boolean, created_by bigint, created_date timestamp(6), id bigint generated by default as identity (start with 1), last_modified_by bigint, last_modified_date timestamp(6), email varchar(255), firstname varchar(255), gender varchar(255) check (gender in ('MALE','FEMALE')), lastname varchar(255) not null, st_city varchar(255), st_number varchar(255), st_street varchar(255), primary key (id))
create table students_courses (course_id bigint not null, student_id bigint not null)
create table teacher (id bigint generated by default as identity (start with 1), firstname varchar(255), lastname varchar(255), primary key (id))
alter table course add constraint FKsybhlxoejr4j3teomm5u2bx1n foreign key (teacher_id) references teacher
alter table course_material add constraint FK6qgylrot7cxgungunwyrslpeo foreign key (course_id) references course
alter table lesson add constraint FKjs3c7skmg8bvdddok5lc7s807 foreign key (course_id) references course
alter table lesson add constraint FK9yhaoqrjxt5gwmn6icp1lf35n foreign key (teacher_id) references teacher
alter table students_courses add constraint FKd6vd2y2gdvqap78cu28i6xki5 foreign key (course_id) references course
alter table students_courses add constraint FKfbiw8vd6a6fxgjlqi99c977al foreign key (student_id) references student
DISCONNECT
/*C3*/SET SCHEMA PUBLIC
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
DISCONNECT
